---

title: Data_preprocess


keywords: fastai
sidebar: home_sidebar



nb_path: "01_data_prepocess.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 01_data_prepocess.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Load-data">Load data<a class="anchor-link" href="#Load-data"> </a></h2><blockquote><p>Load the table and visuallise</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>(69200, 73)
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>gps-coordinates.latitude</th>
      <th>gps-coordinates.longitude</th>
      <th>gps-coordinates.accuracy</th>
      <th>location.region_label</th>
      <th>location.district_label</th>
      <th>location.ward_label</th>
      <th>location.school_label</th>
      <th>location.school_emis_code</th>
      <th>location.school_new_emis_code</th>
      <th>location.school_school_level</th>
      <th>location.school_ownership</th>
      <th>location.school_town</th>
      <th>location.school_chiefdom</th>
      <th>date_start</th>
      <th>time_start</th>
      <th>cd_teacher_name</th>
      <th>cd_class</th>
      <th>cd_subject</th>
      <th>cd_term</th>
      <th>cd_lesson</th>
      <th>cd_school_gender</th>
      <th>cd_girlsenrolled</th>
      <th>cd_boysenrolled</th>
      <th>cd_girlspresent</th>
      <th>cd_boyspresent</th>
      <th>lesson_start_date</th>
      <th>lesson_start_time</th>
      <th>co_star1</th>
      <th>co_star1_example</th>
      <th>co_star2</th>
      <th>co_star2_example</th>
      <th>co_wish</th>
      <th>co_wish_actions</th>
      <th>co_lpm_present</th>
      <th>co_lpm_follow</th>
      <th>co_lpm_step1</th>
      <th>co_lpm_step2</th>
      <th>co_lpm_step3</th>
      <th>co_lpm_step4</th>
      <th>co_lpm_step5</th>
      <th>co_positive_language</th>
      <th>co_organize</th>
      <th>co_mult_assess</th>
      <th>co_include</th>
      <th>co_content_know</th>
      <th>co_feedback</th>
      <th>Pedagogy composite score (max of 24)</th>
      <th>feedback_notes</th>
      <th>user-profile.item-1.first_name</th>
      <th>user-profile.item-1.last_name</th>
      <th>cd_junk_var</th>
      <th>co_notes</th>
      <th>co_pupil_handbooks</th>
      <th>co_fqse_learning_materials</th>
      <th>user-profile.item-1.user_role</th>
      <th>item_0d659cd377d84f82b34fae0f4215bdc1_firstOpenTime</th>
      <th>item_0d659cd377d84f82b34fae0f4215bdc1_disabled</th>
      <th>mark_endtime_checkbox</th>
      <th>date_end</th>
      <th>enumerator</th>
      <th>time_end</th>
      <th>time_end_unix</th>
      <th>user-profile.item-1.tabletUserName</th>
      <th>tabletUserName</th>
      <th>cd_lwlsupport</th>
      <th>cd_lessonvalid</th>
      <th>cd_feedbacktype</th>
      <th>cd_reponse</th>
      <th>cd_previousfeedback</th>
      <th>cd_feedbackprogress</th>
      <th>co_use_aid</th>
      <th>co_use_aid_specify</th>
      <th>co_encourage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7.959370</td>
      <td>-11.743074</td>
      <td>4.551</td>
      <td>Southern</td>
      <td>Bo</td>
      <td>277</td>
      <td>Kaku A Community Junior Secondary School</td>
      <td>319101325.0</td>
      <td>NaN</td>
      <td>Junior Secondary</td>
      <td>Community</td>
      <td>Bo</td>
      <td>Kakua</td>
      <td>2019-10-16</td>
      <td>08:39:00</td>
      <td>Moses Simbo</td>
      <td>jss1</td>
      <td>math</td>
      <td>1.0</td>
      <td>7.0</td>
      <td>mixed</td>
      <td>12.0</td>
      <td>16.0</td>
      <td>12.0</td>
      <td>10.0</td>
      <td>2019-10-16</td>
      <td>08:42:00</td>
      <td>Teacher involved pupils in to the lesson</td>
      <td>Teacher involved pupils in the lesson during t...</td>
      <td>Teacher avoid flogging</td>
      <td>Teacher did not flog pupils during the lesson.</td>
      <td>Teacher did not scanned the class during the o...</td>
      <td>SSO engaged and encourage the teacher to pleas...</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>13</td>
      <td>Teacher did not scanned the class during the o...</td>
      <td>Francess</td>
      <td>Foray</td>
      <td>NaN</td>
      <td>Some of the pupils are not with the pupils han...</td>
      <td>some</td>
      <td>some</td>
      <td>sso</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>2019-10-16</td>
      <td>999.0</td>
      <td>09:10:00</td>
      <td>999.0</td>
      <td>FrancessForay</td>
      <td>FrancessForay</td>
      <td>Old</td>
      <td>Yes</td>
      <td>Verbal</td>
      <td>Teacher agreed to improve on his wish next les...</td>
      <td>First lesson observation</td>
      <td>No</td>
      <td>999.0</td>
      <td>999</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Western</td>
      <td>Western Area Urban</td>
      <td>426</td>
      <td>Baptist Junior Secondary School</td>
      <td>420102301.0</td>
      <td>NaN</td>
      <td>Junior Secondary</td>
      <td>Mission Religious Group</td>
      <td>Bambara Town</td>
      <td>Central I</td>
      <td>2020-02-12</td>
      <td>10:15:00</td>
      <td>Mr David Kamara</td>
      <td>jss1</td>
      <td>english</td>
      <td>2.0</td>
      <td>55.0</td>
      <td>mixed</td>
      <td>25.0</td>
      <td>23.0</td>
      <td>25.0</td>
      <td>23.0</td>
      <td>2020-02-12</td>
      <td>10:17:00</td>
      <td>Content</td>
      <td>The teacher is comfortable and in control of t...</td>
      <td>Assessment</td>
      <td>The teacher uses different methods of assessin...</td>
      <td>To be more audible in the next lesson</td>
      <td>Feedback session with teacher after observation</td>
      <td>1.0</td>
      <td>4.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>5</td>
      <td>NaN</td>
      <td>Mohamed Joseph</td>
      <td>Kamara</td>
      <td>NaN</td>
      <td>PHB shortage</td>
      <td>most</td>
      <td>most</td>
      <td>sso</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>2020-02-12</td>
      <td>999.0</td>
      <td>10:56:00</td>
      <td>999.0</td>
      <td>MjJ_kamara</td>
      <td>MjJ_kamara</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>999</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>8.825699</td>
      <td>-13.131853</td>
      <td>6.068</td>
      <td>North Western</td>
      <td>Port Loko</td>
      <td>245</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2019-02-12</td>
      <td>11:01:00</td>
      <td>Kamara Alie Thim</td>
      <td>jss2</td>
      <td>english</td>
      <td>2.0</td>
      <td>56.0</td>
      <td>mixed</td>
      <td>25.0</td>
      <td>32.0</td>
      <td>21.0</td>
      <td>28.0</td>
      <td>2019-02-12</td>
      <td>11:06:00</td>
      <td>Lesson Delivery</td>
      <td>The teacher delivered the lesson perfectly and...</td>
      <td>Motivating the pupils</td>
      <td>The teacher motivating the pupils during the l...</td>
      <td>Needs to prepare ahead for better delivering.</td>
      <td>The teacher needs to prepare ahead of any less...</td>
      <td>1.0</td>
      <td>3.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>5</td>
      <td>Successful observation.</td>
      <td>Santigie Alie</td>
      <td>Kamara</td>
      <td>NaN</td>
      <td>Successful observation.</td>
      <td>most</td>
      <td>most</td>
      <td>sso</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>2019-02-12</td>
      <td>999.0</td>
      <td>11:25:00</td>
      <td>999.0</td>
      <td>SantigieAlieKamara</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>Sentences at the end of the lesson plan</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Create-a-subset-of-table">Create a subset of table<a class="anchor-link" href="#Create-a-subset-of-table"> </a></h2><blockquote><p>Create subset of table with relevant columns, the columns selected are as below:&gt;&gt; - 'date_start', 'location.district_label', 'location.school_label', 'cd_teacher_name','cd_class','cd_subject','cd_girlspresent',              'cd_boyspresent', 'location.school_school_level', 'co_star1', 'co_star1_example', 'co_star2', 'co_star2_example', 'co_wish',              'co_wish_actions', 'feedback_notes', 'co_lpm_follow', 'Pedagogy composite score (max of 24)'</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_sub</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date_start</th>
      <th>location.district_label</th>
      <th>location.school_label</th>
      <th>cd_teacher_name</th>
      <th>cd_class</th>
      <th>cd_subject</th>
      <th>cd_girlspresent</th>
      <th>cd_boyspresent</th>
      <th>location.school_school_level</th>
      <th>co_star1</th>
      <th>co_star1_example</th>
      <th>co_star2</th>
      <th>co_star2_example</th>
      <th>co_wish</th>
      <th>co_wish_actions</th>
      <th>feedback_notes</th>
      <th>co_lpm_follow</th>
      <th>Pedagogy composite score (max of 24)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2019-10-16</td>
      <td>Bo</td>
      <td>Kaku A Community Junior Secondary School</td>
      <td>Moses Simbo</td>
      <td>jss1</td>
      <td>math</td>
      <td>12.0</td>
      <td>10.0</td>
      <td>Junior Secondary</td>
      <td>Teacher involved pupils in to the lesson</td>
      <td>Teacher involved pupils in the lesson during t...</td>
      <td>Teacher avoid flogging</td>
      <td>Teacher did not flog pupils during the lesson.</td>
      <td>Teacher did not scanned the class during the o...</td>
      <td>SSO engaged and encourage the teacher to pleas...</td>
      <td>Teacher did not scanned the class during the o...</td>
      <td>2.0</td>
      <td>13</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020-02-12</td>
      <td>Western Area Urban</td>
      <td>Baptist Junior Secondary School</td>
      <td>Mr David Kamara</td>
      <td>jss1</td>
      <td>english</td>
      <td>25.0</td>
      <td>23.0</td>
      <td>Junior Secondary</td>
      <td>Content</td>
      <td>The teacher is comfortable and in control of t...</td>
      <td>Assessment</td>
      <td>The teacher uses different methods of assessin...</td>
      <td>To be more audible in the next lesson</td>
      <td>Feedback session with teacher after observation</td>
      <td>NaN</td>
      <td>4.0</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2019-02-12</td>
      <td>Port Loko</td>
      <td>NaN</td>
      <td>Kamara Alie Thim</td>
      <td>jss2</td>
      <td>english</td>
      <td>21.0</td>
      <td>28.0</td>
      <td>NaN</td>
      <td>Lesson Delivery</td>
      <td>The teacher delivered the lesson perfectly and...</td>
      <td>Motivating the pupils</td>
      <td>The teacher motivating the pupils during the l...</td>
      <td>Needs to prepare ahead for better delivering.</td>
      <td>The teacher needs to prepare ahead of any less...</td>
      <td>Successful observation.</td>
      <td>3.0</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Combine-columns">Combine columns<a class="anchor-link" href="#Combine-columns"> </a></h2><blockquote><p>Combining of columns are required for Star and wish as they are in multiple columns, we will make a new column with all texts concatenated</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_sub</span> <span class="p">[[</span><span class="s1">&#39;co_star&#39;</span><span class="p">,</span><span class="s1">&#39;co_wish&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>co_star</th>
      <th>co_wish</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Teacher involved pupils in to the lesson. Teacher involved pupils in the lesson during the guided practice.\nAsk pupils to identify the common multiples of 4&amp;6 .. Teacher avoid flogging. Teacher did not flog pupils during the lesson..</td>
      <td>Teacher did not scanned the class during the opening of the lesson.. SSO engaged and encourage the teacher to please scan the class during the lesson..</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Content. The teacher is comfortable and in control of the content being taught. Assessment. The teacher uses different methods of assessing pupils.</td>
      <td>To be more audible in the next lesson. Feedback session with teacher after observation.</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Lesson Delivery. The teacher delivered the lesson perfectly and explains thoroughly.. Motivating the pupils. The teacher motivating the pupils during the lesson and encourage people to participate fully ..</td>
      <td>Needs to prepare ahead for better delivering.. The teacher needs to prepare ahead of any lesson for better understanding..</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Teacher engaged all pupils in their learning. Teacher treated boys and girls equitably when asking questions.. Teacher structured the lesson properly to allow for pupils active learning.. Teacher used at least one strategy to ensure pupils receive feedback on the individual practice such as peer marking ..</td>
      <td>Teacher does proper closing.. Adviced teacher to always recap the entire lesson before leaving the class..</td>
    </tr>
    <tr>
      <th>4</th>
      <td>The teacher is mobile.. He moves between rows during independent practice.. Teacher speaks audibly and clearly.. He is so audible that pupils at the back can clearly hear him..</td>
      <td>The teacher is not comfortable with the Lesson being taught.. I will encourage the teacher to be preparing fully in advance before coming to class..</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Clean-the-text">Clean the text<a class="anchor-link" href="#Clean-the-text"> </a></h2><blockquote><p>Remove special characters, punctuation, stop words etc</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">rep</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;\s+&#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>

<span class="n">fn_remove_punc</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c1"># fn_rep = lambda x: rep(x)</span>
<span class="c1"># .replace(&#39;,&#39;,&#39;.&#39;).replace(&#39;;&#39;,&#39;.&#39;).replace(&#39; he &#39;,&#39;teacher &#39;).replace(&#39; she &#39;,&#39;teacher &#39;)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">clean_punc</span><span class="p">(</span><span class="n">string</span><span class="p">,</span><span class="n">translator</span><span class="p">):</span>
    <span class="n">string</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">translator</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">string</span>

<span class="c1">## remove stopwords</span>
<span class="n">nlp</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;en_core_web_sm&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">remove_stopword</span><span class="p">(</span><span class="n">string</span><span class="p">,</span><span class="n">nlp</span><span class="p">):</span>
    <span class="n">doc</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
    
    <span class="n">token_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
        <span class="n">token_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    
    <span class="n">filtered_sentence</span> <span class="o">=</span><span class="p">[]</span> 
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">token_list</span><span class="p">:</span>
        <span class="n">lexeme</span> <span class="o">=</span> <span class="n">nlp</span><span class="o">.</span><span class="n">vocab</span><span class="p">[</span><span class="n">word</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">lexeme</span><span class="o">.</span><span class="n">is_stop</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">filtered_sentence</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> 
    
    <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">filtered_sentence</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>See the table after cleaning</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_sub</span> <span class="p">[[</span><span class="s1">&#39;co_star&#39;</span><span class="p">,</span><span class="s1">&#39;co_star_clean&#39;</span><span class="p">,</span><span class="s2">&quot;co_wish&quot;</span><span class="p">,</span><span class="s1">&#39;co_wish_clean&#39;</span><span class="p">,</span><span class="s1">&#39;feedback_notes&#39;</span><span class="p">,</span><span class="s1">&#39;feedback_notes_clean&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>co_star</th>
      <th>co_star_clean</th>
      <th>co_wish</th>
      <th>co_wish_clean</th>
      <th>feedback_notes</th>
      <th>feedback_notes_clean</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>teacher involved pupils in to the lesson. teacher involved pupils in the lesson during the guided practice. ask pupils to identify the common multiples of 4&amp;6 . teacher avoid flogging. teacher did not flog pupils during the lesson.</td>
      <td>teacher involved pupils lesson teacher involved pupils lesson guided practice ask pupils identify common multiples 46   teacher avoid flogging teacher flog pupils lesson</td>
      <td>teacher did not scanned the class during the opening of the lesson. sso engaged and encourage the teacher to please scan the class during the lesson.</td>
      <td>teacher scanned class opening lesson sso engaged encourage teacher scan class lesson</td>
      <td>teacher did not scanned the class during the opening of the lesson.</td>
      <td>teacher scanned class opening lesson</td>
    </tr>
    <tr>
      <th>1</th>
      <td>content. the teacher is comfortable and in control of the content being taught. assessment. the teacher uses different methods of assessing pupils.</td>
      <td>content teacher comfortable control content taught assessment teacher uses different methods assessing pupils</td>
      <td>to be more audible in the next lesson. feedback session with teacher after observation.</td>
      <td>audible lesson feedback session teacher observation</td>
      <td>nan</td>
      <td>nan</td>
    </tr>
    <tr>
      <th>2</th>
      <td>lesson delivery. the teacher delivered the lesson perfectly and explains thoroughly. motivating the pupils. the teacher motivating the pupils during the lesson and encourage people to participate fully .</td>
      <td>lesson delivery teacher delivered lesson perfectly explains thoroughly motivating pupils teacher motivating pupils lesson encourage people participate fully</td>
      <td>needs to prepare ahead for better delivering. the teacher needs to prepare ahead of any lesson for better understanding.</td>
      <td>needs prepare ahead better delivering teacher needs prepare ahead lesson better understanding</td>
      <td>successful observation.</td>
      <td>successful observation</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Lemmetise">Lemmetise<a class="anchor-link" href="#Lemmetise"> </a></h2><blockquote><p>Lemmetisation means making the word to it's base form. We will do it for star, wish and feedback column</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">cal_lemma</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
    <span class="n">doc</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">lemma_</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">]</span>
    <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">y</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>See the table after lemmetisation</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_sub</span> <span class="p">[[</span><span class="s1">&#39;co_star&#39;</span><span class="p">,</span><span class="s1">&#39;co_star_clean_lemma&#39;</span><span class="p">,</span><span class="s2">&quot;co_wish&quot;</span><span class="p">,</span><span class="s1">&#39;co_wish_clean_lemma&#39;</span><span class="p">,</span><span class="s1">&#39;feedback_notes&#39;</span><span class="p">,</span><span class="s1">&#39;feedback_notes_clean_lemma&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>co_star</th>
      <th>co_star_clean_lemma</th>
      <th>co_wish</th>
      <th>co_wish_clean_lemma</th>
      <th>feedback_notes</th>
      <th>feedback_notes_clean_lemma</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>teacher involved pupils in to the lesson. teacher involved pupils in the lesson during the guided practice. ask pupils to identify the common multiples of 4&amp;6 . teacher avoid flogging. teacher did not flog pupils during the lesson.</td>
      <td>teacher involve pupil lesson teacher involve pupil lesson guide practice ask pupil identify common multiple 46    teacher avoid flog teacher flog pupil lesson</td>
      <td>teacher did not scanned the class during the opening of the lesson. sso engaged and encourage the teacher to please scan the class during the lesson.</td>
      <td>teacher scan class opening lesson sso engage encourage teacher scan class lesson</td>
      <td>teacher did not scanned the class during the opening of the lesson.</td>
      <td>teacher scan class opening lesson</td>
    </tr>
    <tr>
      <th>1</th>
      <td>content. the teacher is comfortable and in control of the content being taught. assessment. the teacher uses different methods of assessing pupils.</td>
      <td>content teacher comfortable control content teach assessment teacher use different method assess pupil</td>
      <td>to be more audible in the next lesson. feedback session with teacher after observation.</td>
      <td>audible lesson feedback session teacher observation</td>
      <td>nan</td>
      <td>nan</td>
    </tr>
    <tr>
      <th>2</th>
      <td>lesson delivery. the teacher delivered the lesson perfectly and explains thoroughly. motivating the pupils. the teacher motivating the pupils during the lesson and encourage people to participate fully .</td>
      <td>lesson delivery teacher deliver lesson perfectly explain thoroughly motivate pupil teacher motivate pupil lesson encourage people participate fully</td>
      <td>needs to prepare ahead for better delivering. the teacher needs to prepare ahead of any lesson for better understanding.</td>
      <td>need prepare ahead well deliver teacher need prepare ahead lesson well understanding</td>
      <td>successful observation.</td>
      <td>successful observation</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Tag-part-of-Speech">Tag part of Speech<a class="anchor-link" href="#Tag-part-of-Speech"> </a></h2><blockquote><p>Tag part of speech for columns Star, Wish and Feedback, part of speech would identify the Noun, Verb etc from Sentence</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># calculate POS and Lemma</span>

<span class="k">def</span> <span class="nf">set_key</span><span class="p">(</span><span class="n">dictionary</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="p">:</span>
        <span class="n">dictionary</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">dictionary</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="p">[</span><span class="n">key</span><span class="p">]:</span>
            <span class="n">dictionary</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">dictionary</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">dictionary</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">value</span><span class="p">]</span>
        
<span class="k">def</span> <span class="nf">cal_lemma_pos</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">s</span><span class="o">=</span><span class="p">{}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">y</span><span class="o">=</span><span class="p">[(</span><span class="n">x</span><span class="o">.</span><span class="n">pos_</span><span class="p">,</span><span class="n">x</span><span class="o">.</span><span class="n">lemma_</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="n">y</span><span class="p">:</span>
            <span class="n">set_key</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">return</span> <span class="n">s</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>See the table after part of speech tagging</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_sub</span><span class="p">[[</span><span class="s1">&#39;co_star_pos_lemma&#39;</span><span class="p">,</span><span class="s1">&#39;co_wish_pos_lemma&#39;</span><span class="p">,</span><span class="s1">&#39;feedback_notes_pos_lemma&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>co_star_pos_lemma</th>
      <th>co_wish_pos_lemma</th>
      <th>feedback_notes_pos_lemma</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>{'NOUN': ['teacher', 'pupil', 'lesson', 'practice', 'multiple'], 'VERB': ['involve', 'involve', 'guide', 'ask', 'identify', 'avoid', 'flog'], 'ADP': ['in', 'to', 'during', 'of'], 'DET': ['the', 'the'], 'PUNCT': ['.', '.'], 'PART': ['to', 'not'], 'ADJ': 'common', 'NUM': '4&amp;6', 'AUX': 'do'}</td>
      <td>{'NOUN': ['teacher', 'class', 'opening', 'lesson', 'sso'], 'AUX': 'do', 'PART': ['not', 'to'], 'VERB': ['scan', 'engage', 'encourage', 'please'], 'DET': ['the', 'the'], 'ADP': ['during', 'of'], 'PUNCT': ['.', '.'], 'CCONJ': 'and'}</td>
      <td>{'NOUN': ['teacher', 'class', 'opening', 'lesson'], 'AUX': 'do', 'PART': 'not', 'VERB': 'scan', 'DET': ['the', 'the'], 'ADP': ['during', 'of'], 'PUNCT': '.'}</td>
    </tr>
    <tr>
      <th>1</th>
      <td>{'NOUN': ['content', 'teacher', 'control', 'assessment', 'method', 'pupil'], 'PUNCT': ['.', '.'], 'DET': ['the', 'the'], 'AUX': ['be', 'be'], 'ADJ': ['comfortable', 'different'], 'CCONJ': 'and', 'ADP': ['in', 'of'], 'VERB': ['teach', 'use', 'assess']}</td>
      <td>{'PART': 'to', 'VERB': 'be', 'ADV': 'more', 'ADJ': ['audible', 'next'], 'ADP': ['in', 'with', 'after'], 'DET': 'the', 'NOUN': ['lesson', 'feedback', 'session', 'teacher', 'observation'], 'PUNCT': ['.', '.']}</td>
      <td>{'NOUN': 'nan'}</td>
    </tr>
    <tr>
      <th>2</th>
      <td>{'NOUN': ['lesson', 'delivery', 'teacher', 'pupil', 'people'], 'PUNCT': ['.', '.'], 'DET': ['the', 'the'], 'VERB': ['deliver', 'explain', 'motivate', 'encourage', 'participate'], 'ADV': ['perfectly', 'thoroughly', 'fully'], 'CCONJ': ['and', 'and'], 'ADP': 'during', 'PART': 'to'}</td>
      <td>{'VERB': ['need', 'prepare'], 'PART': ['to', 'to'], 'ADV': ['ahead', 'ahead'], 'ADP': ['for', 'of'], 'ADJ': ['well', 'well'], 'NOUN': ['delivering', 'teacher', 'lesson', 'understanding'], 'PUNCT': ['.', '.'], 'DET': ['the', 'any']}</td>
      <td>{'ADJ': 'successful', 'NOUN': 'observation', 'PUNCT': '.'}</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

